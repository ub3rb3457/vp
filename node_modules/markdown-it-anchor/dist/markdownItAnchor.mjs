function e(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var n=!1,t={false:"push",true:"unshift",after:"push",before:"unshift"};function r(e,r,a,i){var l;if(!n){var o="Using deprecated markdown-it-anchor permalink option, see https://github.com/valeriangalliat/markdown-it-anchor#todo-anchor-or-file";process&&process.emitWarning?process.emitWarning(o):console.warn(o),n=!0}var c=[Object.assign(new a.Token("link_open","a",1),{attrs:[].concat(r.permalinkClass?[["class",r.permalinkClass]]:[],[["href",r.permalinkHref(e,a)]],Object.entries(r.permalinkAttrs(e,a)))}),Object.assign(new a.Token("html_inline","",0),{content:r.permalinkSymbol}),new a.Token("link_close","a",-1)];r.permalinkSpace&&a.tokens[i+1].children[t[r.permalinkBefore]](Object.assign(new a.Token("text","",0),{content:" "})),(l=a.tokens[i+1].children)[t[r.permalinkBefore]].apply(l,c)}function a(e){return"#"+e}function i(e){return{}}var l={class:"header-anchor",symbol:"#",renderHref:a,renderAttrs:i};function o(e){function n(t){return t=Object.assign({},n.defaults,t),function(n,r,a,i){return e(n,t,r,a,i)}}return n.defaults=Object.assign({},l),n}var c=o(function(e,n,r,a,i){var l,o=[Object.assign(new a.Token("link_open","a",1),{attrs:[].concat(n.class?[["class",n.class]]:[],[["href",n.renderHref(e,a)],["aria-hidden","true"]],Object.entries(n.renderAttrs(e,a)))}),Object.assign(new a.Token("html_inline","",0),{content:n.symbol}),new a.Token("link_close","a",-1)];n.space&&a.tokens[i+1].children[t[n.placement]](Object.assign(new a.Token("text","",0),{content:" "})),(l=a.tokens[i+1].children)[t[n.placement]].apply(l,o)});Object.assign(c.defaults,{space:!0,placement:"after"});var s=o(function(e,n,t,r,a){var i=[Object.assign(new r.Token("link_open","a",1),{attrs:[].concat(n.class?[["class",n.class]]:[],[["href",n.renderHref(e,r)]],Object.entries(n.renderAttrs(e,r)))})].concat(r.tokens[a+1].children,[new r.Token("link_close","a",-1)]);r.tokens[a+1]=Object.assign(new r.Token("inline","",0),{children:i})}),u=o(function(e,n,r,a,i){var l;if(!["visually-hidden","aria-label","aria-describedby","aria-labelledby"].includes(n.style))throw new Error("`permalink.linkAfterHeader` called with unknown style option `"+n.style+"`");if(!["aria-describedby","aria-labelledby"].includes(n.style)&&!n.assistiveText)throw new Error("`permalink.linkAfterHeader` called without the `assistiveText` option in `"+n.style+"` style");if("visually-hidden"===n.style&&!n.visuallyHiddenClass)throw new Error("`permalink.linkAfterHeader` called without the `visuallyHiddenClass` option in `visually-hidden` style");var o=a.tokens[i+1].children.filter(function(e){return"text"===e.type||"code_inline"===e.type}).reduce(function(e,n){return e+n.content},""),c=[],s=[];n.class&&s.push(["class",n.class]),s.push(["href",n.renderHref(e,a)]),s.push.apply(s,Object.entries(n.renderAttrs(e,a))),"visually-hidden"===n.style?(c.push(Object.assign(new a.Token("span_open","span",1),{attrs:[["class",n.visuallyHiddenClass]]}),Object.assign(new a.Token("text","",0),{content:n.assistiveText(o)}),new a.Token("span_close","span",-1)),n.space&&c[t[n.placement]](Object.assign(new a.Token("text","",0),{content:" "})),c[t[n.placement]](Object.assign(new a.Token("span_open","span",1),{attrs:[["aria-hidden","true"]]}),Object.assign(new a.Token("html_inline","",0),{content:n.symbol}),new a.Token("span_close","span",-1))):c.push(Object.assign(new a.Token("html_inline","",0),{content:n.symbol})),"aria-label"===n.style?s.push(["aria-label",n.assistiveText(o)]):["aria-describedby","aria-labelledby"].includes(n.style)&&s.push([n.style,e]);var u=[Object.assign(new a.Token("link_open","a",1),{attrs:s})].concat(c,[new a.Token("link_close","a",-1)]);(l=a.tokens).splice.apply(l,[i+3,0].concat(u))});function d(e,n,t,r){var a=e,i=r;if(t&&Object.prototype.hasOwnProperty.call(n,a))throw new Error("User defined `id` attribute `"+e+"` is not unique. Please fix it in your Markdown to continue.");for(;Object.prototype.hasOwnProperty.call(n,a);)a=e+"-"+i,i+=1;return n[a]=!0,a}function f(n,t){t=Object.assign({},f.defaults,t),n.core.ruler.push("anchor",function(n){for(var a,i,l={},o=n.tokens,c=Array.isArray(t.level)?(a=t.level,function(e){return a.includes(e)}):function(e){return function(n){return n>=e}}(t.level),s=function(n){var t=0;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(n=function(n,t){if(n){if("string"==typeof n)return e(n,void 0);var r=Object.prototype.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(n,void 0):void 0}}(n)))return function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=n[Symbol.iterator]()).next.bind(t)}(o);!(i=s()).done;){var u=i.value;if("heading_open"===u.type&&c(Number(u.tag.substr(1)))){var f=o.indexOf(u),b=o[f+1].children.filter(function(e){return"text"===e.type||"code_inline"===e.type}).reduce(function(e,n){return e+n.content},""),p=u.attrGet("id");p=null==p?d(t.slugify(b),l,!1,t.uniqueSlugStartIndex):d(p,l,!0,t.uniqueSlugStartIndex),u.attrSet("id",p),!1!==t.tabIndex&&u.attrSet("tabindex",""+t.tabIndex),"function"==typeof t.permalink?t.permalink(p,t,n,f):(t.permalink||t.renderPermalink&&t.renderPermalink!==r)&&t.renderPermalink(p,t,n,f),t.callback&&t.callback(u,{slug:p,title:b})}}})}Object.assign(u.defaults,{style:"visually-hidden",space:!0,placement:"after"}),f.permalink={__proto__:null,legacy:r,renderHref:a,renderAttrs:i,makePermalink:o,ariaHidden:c,headerLink:s,linkAfterHeader:u},f.defaults={level:1,slugify:function(e){return encodeURIComponent(String(e).trim().toLowerCase().replace(/\s+/g,"-"))},uniqueSlugStartIndex:1,tabIndex:"-1",permalink:!1,renderPermalink:r,permalinkClass:c.defaults.class,permalinkSpace:c.defaults.space,permalinkSymbol:"Â¶",permalinkBefore:"before"===c.defaults.placement,permalinkHref:c.defaults.renderHref,permalinkAttrs:c.defaults.renderAttrs};export default f;
//# sourceMappingURL=markdownItAnchor.mjs.map
