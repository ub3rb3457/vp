let e=!1;const n={false:"push",true:"unshift",after:"push",before:"unshift"};function t(t,r,i,a){if(!e){const n="Using deprecated markdown-it-anchor permalink option, see https://github.com/valeriangalliat/markdown-it-anchor#todo-anchor-or-file";process&&process.emitWarning?process.emitWarning(n):console.warn(n),e=!0}const l=[Object.assign(new i.Token("link_open","a",1),{attrs:[...r.permalinkClass?[["class",r.permalinkClass]]:[],["href",r.permalinkHref(t,i)],...Object.entries(r.permalinkAttrs(t,i))]}),Object.assign(new i.Token("html_inline","",0),{content:r.permalinkSymbol}),new i.Token("link_close","a",-1)];r.permalinkSpace&&i.tokens[a+1].children[n[r.permalinkBefore]](Object.assign(new i.Token("text","",0),{content:" "})),i.tokens[a+1].children[n[r.permalinkBefore]](...l)}function r(e){return"#"+e}function i(e){return{}}const a={class:"header-anchor",symbol:"#",renderHref:r,renderAttrs:i};function l(e){function n(t){return t=Object.assign({},n.defaults,t),(n,r,i,a)=>e(n,t,r,i,a)}return n.defaults=Object.assign({},a),n}const o=l((e,t,r,i,a)=>{const l=[Object.assign(new i.Token("link_open","a",1),{attrs:[...t.class?[["class",t.class]]:[],["href",t.renderHref(e,i)],["aria-hidden","true"],...Object.entries(t.renderAttrs(e,i))]}),Object.assign(new i.Token("html_inline","",0),{content:t.symbol}),new i.Token("link_close","a",-1)];t.space&&i.tokens[a+1].children[n[t.placement]](Object.assign(new i.Token("text","",0),{content:" "})),i.tokens[a+1].children[n[t.placement]](...l)});Object.assign(o.defaults,{space:!0,placement:"after"});const c=l((e,n,t,r,i)=>{const a=[Object.assign(new r.Token("link_open","a",1),{attrs:[...n.class?[["class",n.class]]:[],["href",n.renderHref(e,r)],...Object.entries(n.renderAttrs(e,r))]}),...r.tokens[i+1].children,new r.Token("link_close","a",-1)];r.tokens[i+1]=Object.assign(new r.Token("inline","",0),{children:a})}),s=l((e,t,r,i,a)=>{if(!["visually-hidden","aria-label","aria-describedby","aria-labelledby"].includes(t.style))throw new Error(`\`permalink.linkAfterHeader\` called with unknown style option \`${t.style}\``);if(!["aria-describedby","aria-labelledby"].includes(t.style)&&!t.assistiveText)throw new Error(`\`permalink.linkAfterHeader\` called without the \`assistiveText\` option in \`${t.style}\` style`);if("visually-hidden"===t.style&&!t.visuallyHiddenClass)throw new Error("`permalink.linkAfterHeader` called without the `visuallyHiddenClass` option in `visually-hidden` style");const l=i.tokens[a+1].children.filter(e=>"text"===e.type||"code_inline"===e.type).reduce((e,n)=>e+n.content,""),o=[],c=[];t.class&&c.push(["class",t.class]),c.push(["href",t.renderHref(e,i)]),c.push(...Object.entries(t.renderAttrs(e,i))),"visually-hidden"===t.style?(o.push(Object.assign(new i.Token("span_open","span",1),{attrs:[["class",t.visuallyHiddenClass]]}),Object.assign(new i.Token("text","",0),{content:t.assistiveText(l)}),new i.Token("span_close","span",-1)),t.space&&o[n[t.placement]](Object.assign(new i.Token("text","",0),{content:" "})),o[n[t.placement]](Object.assign(new i.Token("span_open","span",1),{attrs:[["aria-hidden","true"]]}),Object.assign(new i.Token("html_inline","",0),{content:t.symbol}),new i.Token("span_close","span",-1))):o.push(Object.assign(new i.Token("html_inline","",0),{content:t.symbol})),"aria-label"===t.style?c.push(["aria-label",t.assistiveText(l)]):["aria-describedby","aria-labelledby"].includes(t.style)&&c.push([t.style,e]);const s=[Object.assign(new i.Token("link_open","a",1),{attrs:c}),...o,new i.Token("link_close","a",-1)];i.tokens.splice(a+3,0,...s)});function d(e,n,t,r){let i=e,a=r;if(t&&Object.prototype.hasOwnProperty.call(n,i))throw new Error(`User defined \`id\` attribute \`${e}\` is not unique. Please fix it in your Markdown to continue.`);for(;Object.prototype.hasOwnProperty.call(n,i);)i=`${e}-${a}`,a+=1;return n[i]=!0,i}function b(e,n){n=Object.assign({},b.defaults,n),e.core.ruler.push("anchor",e=>{const r={},i=e.tokens,a=Array.isArray(n.level)?(l=n.level,e=>l.includes(e)):(e=>n=>n>=e)(n.level);var l;for(const l of i){if("heading_open"!==l.type)continue;if(!a(Number(l.tag.substr(1))))continue;const o=i.indexOf(l),c=i[o+1].children.filter(e=>"text"===e.type||"code_inline"===e.type).reduce((e,n)=>e+n.content,"");let s=l.attrGet("id");s=null==s?d(n.slugify(c),r,!1,n.uniqueSlugStartIndex):d(s,r,!0,n.uniqueSlugStartIndex),l.attrSet("id",s),!1!==n.tabIndex&&l.attrSet("tabindex",""+n.tabIndex),"function"==typeof n.permalink?n.permalink(s,n,e,o):(n.permalink||n.renderPermalink&&n.renderPermalink!==t)&&n.renderPermalink(s,n,e,o),n.callback&&n.callback(l,{slug:s,title:c})}})}Object.assign(s.defaults,{style:"visually-hidden",space:!0,placement:"after"}),b.permalink={__proto__:null,legacy:t,renderHref:r,renderAttrs:i,makePermalink:l,ariaHidden:o,headerLink:c,linkAfterHeader:s},b.defaults={level:1,slugify:e=>encodeURIComponent(String(e).trim().toLowerCase().replace(/\s+/g,"-")),uniqueSlugStartIndex:1,tabIndex:"-1",permalink:!1,renderPermalink:t,permalinkClass:o.defaults.class,permalinkSpace:o.defaults.space,permalinkSymbol:"Â¶",permalinkBefore:"before"===o.defaults.placement,permalinkHref:o.defaults.renderHref,permalinkAttrs:o.defaults.renderAttrs};export default b;
//# sourceMappingURL=markdownItAnchor.modern.js.map
