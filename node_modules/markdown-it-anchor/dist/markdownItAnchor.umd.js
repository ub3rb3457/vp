!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e=e||self).markdownItAnchor=n()}(this,function(){function e(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var n=!1,t={false:"push",true:"unshift",after:"push",before:"unshift"};function r(e,r,i,a){var o;if(!n){var l="Using deprecated markdown-it-anchor permalink option, see https://github.com/valeriangalliat/markdown-it-anchor#todo-anchor-or-file";process&&process.emitWarning?process.emitWarning(l):console.warn(l),n=!0}var c=[Object.assign(new i.Token("link_open","a",1),{attrs:[].concat(r.permalinkClass?[["class",r.permalinkClass]]:[],[["href",r.permalinkHref(e,i)]],Object.entries(r.permalinkAttrs(e,i)))}),Object.assign(new i.Token("html_inline","",0),{content:r.permalinkSymbol}),new i.Token("link_close","a",-1)];r.permalinkSpace&&i.tokens[a+1].children[t[r.permalinkBefore]](Object.assign(new i.Token("text","",0),{content:" "})),(o=i.tokens[a+1].children)[t[r.permalinkBefore]].apply(o,c)}function i(e){return"#"+e}function a(e){return{}}var o={class:"header-anchor",symbol:"#",renderHref:i,renderAttrs:a};function l(e){function n(t){return t=Object.assign({},n.defaults,t),function(n,r,i,a){return e(n,t,r,i,a)}}return n.defaults=Object.assign({},o),n}var c=l(function(e,n,r,i,a){var o,l=[Object.assign(new i.Token("link_open","a",1),{attrs:[].concat(n.class?[["class",n.class]]:[],[["href",n.renderHref(e,i)],["aria-hidden","true"]],Object.entries(n.renderAttrs(e,i)))}),Object.assign(new i.Token("html_inline","",0),{content:n.symbol}),new i.Token("link_close","a",-1)];n.space&&i.tokens[a+1].children[t[n.placement]](Object.assign(new i.Token("text","",0),{content:" "})),(o=i.tokens[a+1].children)[t[n.placement]].apply(o,l)});Object.assign(c.defaults,{space:!0,placement:"after"});var u=l(function(e,n,t,r,i){var a=[Object.assign(new r.Token("link_open","a",1),{attrs:[].concat(n.class?[["class",n.class]]:[],[["href",n.renderHref(e,r)]],Object.entries(n.renderAttrs(e,r)))})].concat(r.tokens[i+1].children,[new r.Token("link_close","a",-1)]);r.tokens[i+1]=Object.assign(new r.Token("inline","",0),{children:a})}),s=l(function(e,n,r,i,a){var o;if(!["visually-hidden","aria-label","aria-describedby","aria-labelledby"].includes(n.style))throw new Error("`permalink.linkAfterHeader` called with unknown style option `"+n.style+"`");if(!["aria-describedby","aria-labelledby"].includes(n.style)&&!n.assistiveText)throw new Error("`permalink.linkAfterHeader` called without the `assistiveText` option in `"+n.style+"` style");if("visually-hidden"===n.style&&!n.visuallyHiddenClass)throw new Error("`permalink.linkAfterHeader` called without the `visuallyHiddenClass` option in `visually-hidden` style");var l=i.tokens[a+1].children.filter(function(e){return"text"===e.type||"code_inline"===e.type}).reduce(function(e,n){return e+n.content},""),c=[],u=[];n.class&&u.push(["class",n.class]),u.push(["href",n.renderHref(e,i)]),u.push.apply(u,Object.entries(n.renderAttrs(e,i))),"visually-hidden"===n.style?(c.push(Object.assign(new i.Token("span_open","span",1),{attrs:[["class",n.visuallyHiddenClass]]}),Object.assign(new i.Token("text","",0),{content:n.assistiveText(l)}),new i.Token("span_close","span",-1)),n.space&&c[t[n.placement]](Object.assign(new i.Token("text","",0),{content:" "})),c[t[n.placement]](Object.assign(new i.Token("span_open","span",1),{attrs:[["aria-hidden","true"]]}),Object.assign(new i.Token("html_inline","",0),{content:n.symbol}),new i.Token("span_close","span",-1))):c.push(Object.assign(new i.Token("html_inline","",0),{content:n.symbol})),"aria-label"===n.style?u.push(["aria-label",n.assistiveText(l)]):["aria-describedby","aria-labelledby"].includes(n.style)&&u.push([n.style,e]);var s=[Object.assign(new i.Token("link_open","a",1),{attrs:u})].concat(c,[new i.Token("link_close","a",-1)]);(o=i.tokens).splice.apply(o,[a+3,0].concat(s))});function d(e,n,t,r){var i=e,a=r;if(t&&Object.prototype.hasOwnProperty.call(n,i))throw new Error("User defined `id` attribute `"+e+"` is not unique. Please fix it in your Markdown to continue.");for(;Object.prototype.hasOwnProperty.call(n,i);)i=e+"-"+a,a+=1;return n[i]=!0,i}function f(n,t){t=Object.assign({},f.defaults,t),n.core.ruler.push("anchor",function(n){for(var i,a,o={},l=n.tokens,c=Array.isArray(t.level)?(i=t.level,function(e){return i.includes(e)}):function(e){return function(n){return n>=e}}(t.level),u=function(n){var t=0;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(n=function(n,t){if(n){if("string"==typeof n)return e(n,void 0);var r=Object.prototype.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(n,void 0):void 0}}(n)))return function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=n[Symbol.iterator]()).next.bind(t)}(l);!(a=u()).done;){var s=a.value;if("heading_open"===s.type&&c(Number(s.tag.substr(1)))){var f=l.indexOf(s),b=l[f+1].children.filter(function(e){return"text"===e.type||"code_inline"===e.type}).reduce(function(e,n){return e+n.content},""),p=s.attrGet("id");p=null==p?d(t.slugify(b),o,!1,t.uniqueSlugStartIndex):d(p,o,!0,t.uniqueSlugStartIndex),s.attrSet("id",p),!1!==t.tabIndex&&s.attrSet("tabindex",""+t.tabIndex),"function"==typeof t.permalink?t.permalink(p,t,n,f):(t.permalink||t.renderPermalink&&t.renderPermalink!==r)&&t.renderPermalink(p,t,n,f),t.callback&&t.callback(s,{slug:p,title:b})}}})}return Object.assign(s.defaults,{style:"visually-hidden",space:!0,placement:"after"}),f.permalink={__proto__:null,legacy:r,renderHref:i,renderAttrs:a,makePermalink:l,ariaHidden:c,headerLink:u,linkAfterHeader:s},f.defaults={level:1,slugify:function(e){return encodeURIComponent(String(e).trim().toLowerCase().replace(/\s+/g,"-"))},uniqueSlugStartIndex:1,tabIndex:"-1",permalink:!1,renderPermalink:r,permalinkClass:c.defaults.class,permalinkSpace:c.defaults.space,permalinkSymbol:"Â¶",permalinkBefore:"before"===c.defaults.placement,permalinkHref:c.defaults.renderHref,permalinkAttrs:c.defaults.renderAttrs},f});
//# sourceMappingURL=markdownItAnchor.umd.js.map
